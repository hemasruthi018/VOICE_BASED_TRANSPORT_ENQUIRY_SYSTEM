{"ast":null,"code":"var _jsxFileName = \"D:\\\\Desktop\\\\dbmsproject\\\\Voice-based-Transport-Enquiry-System\\\\voiceenquirysystem\\\\src\\\\Components\\\\MainComponents\\\\Card\\\\Card.js\";\nimport React, { Component } from 'react';\nimport './Card.css';\nclass Card extends Component {\n  constructor(props) {\n    super(props);\n    this.handleBusClick = index => {\n      this.setState({\n        bookedbus: index\n      }, () => {\n        this.props.SetBus(this.state.Buses[this.state.bookedbus]); // Set selected bus\n        this.props.onRouteChange('test'); // Navigate to seat selection page\n      });\n    };\n    this.LoadBuses = () => {\n      if (this.state.Buses.length === 0) {\n        console.log('No buses available to display.');\n        return React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 57\n          },\n          __self: this\n        }, \"No buses found\");\n      }\n      return this.state.Buses.map((bus, index) => React.createElement(\"div\", {\n        key: index,\n        className: \"bg-light-yellow br3 pa3 ma2 br2 grow\" // Added grow class to restore clickable area responsiveness\n        ,\n        style: {\n          width: \"550px\",\n          margin: \"0 auto\",\n          marginBottom: \"20px\",\n          cursor: 'pointer'\n        },\n        onClick: () => this.handleBusClick(index) // Click handler for the bus card\n        ,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"clearfix row-one\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"column-two p-right-10 w-30 fl\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"travels lh-24 f-bold d-color\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, bus.AgencyName), React.createElement(\"div\", {\n        className: \"bus-type f-15 m-top-16 l-color\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, bus.AC === 0 ? \"Non-AC\" : \"AC\"), React.createElement(\"img\", {\n        src: \"https://robohash.org/\".concat(index, \"?200x200\"),\n        alt: \"bus\",\n        style: {\n          width: \"50px\",\n          height: \"50px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"column-three p-right-10 w-10 fl\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"dp-time f-15 d-color f-bold\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, bus.StartTime)), React.createElement(\"div\", {\n        className: \"column-four p-right-10 w-20 fl\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"dur l-color lh-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, bus.TravelTime, \" hrs.\"), React.createElement(\"div\", {\n        className: \"bus-type f-15 m-top-16 d-color\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, \"Travel Time\")), React.createElement(\"div\", {\n        className: \"column-eight w-15 fl\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"seat-left m-top-16\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, bus.TotalSeats - bus.ReservedSeats, \" \", React.createElement(\"span\", {\n        className: \"l-color\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, \" Seats available\")))))));\n    };\n    this.state = {\n      Buses: [],\n      // Array to store the buses\n      bookedbus: -1 // Track the selected bus for booking\n    };\n  }\n  componentDidMount() {\n    if (this.props.sbus === true) {\n      const buses = [];\n      const routeIds = this.props.routeids;\n      if (routeIds.length === 0) {\n        console.log(\"No route IDs provided\");\n        return;\n      }\n\n      // Fetch buses for each RouteId\n      Promise.all(routeIds.map(id => fetch(\"http://localhost:3001/fetchBuses/\".concat(id)).then(res => res.json()) // Parse JSON automatically\n      .then(data => {\n        console.log(\"Buses for RouteID \".concat(id, \":\"), data); // Log each response\n        buses.push(...data); // Store the buses in the array\n      }).catch(err => console.log('Error fetching buses:', err)))).then(() => {\n        if (buses.length > 0) {\n          this.setState({\n            Buses: buses\n          });\n          console.log(\"All fetched buses:\", buses); // Log the final list of buses\n        } else {\n          console.log(\"No buses found for any route.\");\n        }\n      }).catch(err => console.error('Error during bus fetching:', err));\n    }\n  }\n  render() {\n    if (this.props.sbus === true) {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }, this.LoadBuses());\n    } else {\n      return React.createElement(\"div\", {\n        className: \"bg-light-yellow dib br3 pa3 ma2 grow\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, React.createElement(\"h4\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, \"Bus Info Placeholder\"));\n    }\n  }\n}\nexport default Card;","map":{"version":3,"names":["React","Component","Card","constructor","props","handleBusClick","index","setState","bookedbus","SetBus","state","Buses","onRouteChange","LoadBuses","length","console","log","createElement","__source","fileName","_jsxFileName","lineNumber","__self","map","bus","key","className","style","width","margin","marginBottom","cursor","onClick","AgencyName","AC","src","concat","alt","height","StartTime","TravelTime","TotalSeats","ReservedSeats","componentDidMount","sbus","buses","routeIds","routeids","Promise","all","id","fetch","then","res","json","data","push","catch","err","error","render"],"sources":["D:/Desktop/dbmsproject/Voice-based-Transport-Enquiry-System/voiceenquirysystem/src/Components/MainComponents/Card/Card.js"],"sourcesContent":["import React, { Component } from 'react';\r\nimport './Card.css';\r\n\r\nclass Card extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      Buses: [], // Array to store the buses\r\n      bookedbus: -1 // Track the selected bus for booking\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (this.props.sbus === true) {\r\n      const buses = [];\r\n      const routeIds = this.props.routeids;\r\n\r\n      if (routeIds.length === 0) {\r\n        console.log(\"No route IDs provided\");\r\n        return;\r\n      }\r\n\r\n      // Fetch buses for each RouteId\r\n      Promise.all(\r\n        routeIds.map(id =>\r\n          fetch(`http://localhost:3001/fetchBuses/${id}`)\r\n            .then(res => res.json()) // Parse JSON automatically\r\n            .then(data => {\r\n              console.log(`Buses for RouteID ${id}:`, data); // Log each response\r\n              buses.push(...data); // Store the buses in the array\r\n            })\r\n            .catch(err => console.log('Error fetching buses:', err))\r\n        )\r\n      )\r\n        .then(() => {\r\n          if (buses.length > 0) {\r\n            this.setState({ Buses: buses });\r\n            console.log(\"All fetched buses:\", buses); // Log the final list of buses\r\n          } else {\r\n            console.log(\"No buses found for any route.\");\r\n          }\r\n        })\r\n        .catch(err => console.error('Error during bus fetching:', err));\r\n    }\r\n  }\r\n\r\n  handleBusClick = (index) => {\r\n    this.setState({ bookedbus: index }, () => {\r\n      this.props.SetBus(this.state.Buses[this.state.bookedbus]); // Set selected bus\r\n      this.props.onRouteChange('test'); // Navigate to seat selection page\r\n    });\r\n  };\r\n\r\n  LoadBuses = () => {\r\n    if (this.state.Buses.length === 0) {\r\n      console.log('No buses available to display.');\r\n      return <p>No buses found</p>;\r\n    }\r\n\r\n    return this.state.Buses.map((bus, index) => (\r\n      <div\r\n        key={index}\r\n        className=\"bg-light-yellow br3 pa3 ma2 br2 grow\" // Added grow class to restore clickable area responsiveness\r\n        style={{ width: \"550px\", margin: \"0 auto\", marginBottom: \"20px\", cursor: 'pointer' }}\r\n        onClick={() => this.handleBusClick(index)}  // Click handler for the bus card\r\n      >\r\n        <div>\r\n          <div className=\"clearfix row-one\">\r\n            <div className=\"column-two p-right-10 w-30 fl\">\r\n              <div className=\"travels lh-24 f-bold d-color\">{bus.AgencyName}</div>\r\n              <div className=\"bus-type f-15 m-top-16 l-color\">{bus.AC === 0 ? \"Non-AC\" : \"AC\"}</div>\r\n              <img src={`https://robohash.org/${index}?200x200`} alt=\"bus\" style={{ width: \"50px\", height: \"50px\" }} />\r\n            </div>\r\n            <div className=\"column-three p-right-10 w-10 fl\">\r\n              <div className=\"dp-time f-15 d-color f-bold\">{bus.StartTime}</div>\r\n            </div>\r\n            <div className=\"column-four p-right-10 w-20 fl\">\r\n              <div className=\"dur l-color lh-12\">{bus.TravelTime} hrs.</div>\r\n              <div className=\"bus-type f-15 m-top-16 d-color\">Travel Time</div>\r\n            </div>\r\n            <div className=\"column-eight w-15 fl\">\r\n              <div className=\"seat-left m-top-16\">{bus.TotalSeats - bus.ReservedSeats} <span className=\"l-color\"> Seats available</span></div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    ));\r\n  };\r\n\r\n  render() {\r\n    if (this.props.sbus === true) {\r\n      return (\r\n        <div>{this.LoadBuses()}</div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div className=\"bg-light-yellow dib br3 pa3 ma2 grow\">\r\n          <h4>Bus Info Placeholder</h4>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\nexport default Card;\r\n"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,SAAS,QAAQ,OAAO;AACxC,OAAO,YAAY;AAEnB,MAAMC,IAAI,SAASD,SAAS,CAAC;EAC3BE,WAAWA,CAACC,KAAK,EAAE;IACjB,KAAK,CAACA,KAAK,CAAC;IAAC,KAyCfC,cAAc,GAAIC,KAAK,IAAK;MAC1B,IAAI,CAACC,QAAQ,CAAC;QAAEC,SAAS,EAAEF;MAAM,CAAC,EAAE,MAAM;QACxC,IAAI,CAACF,KAAK,CAACK,MAAM,CAAC,IAAI,CAACC,KAAK,CAACC,KAAK,CAAC,IAAI,CAACD,KAAK,CAACF,SAAS,CAAC,CAAC,CAAC,CAAC;QAC3D,IAAI,CAACJ,KAAK,CAACQ,aAAa,CAAC,MAAM,CAAC,CAAC,CAAC;MACpC,CAAC,CAAC;IACJ,CAAC;IAAA,KAEDC,SAAS,GAAG,MAAM;MAChB,IAAI,IAAI,CAACH,KAAK,CAACC,KAAK,CAACG,MAAM,KAAK,CAAC,EAAE;QACjCC,OAAO,CAACC,GAAG,CAAC,gCAAgC,CAAC;QAC7C,OAAOhB,KAAA,CAAAiB,aAAA;UAAAC,QAAA;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;UAAA;UAAAC,MAAA;QAAA,GAAG,gBAAiB,CAAC;MAC9B;MAEA,OAAO,IAAI,CAACZ,KAAK,CAACC,KAAK,CAACY,GAAG,CAAC,CAACC,GAAG,EAAElB,KAAK,KACrCN,KAAA,CAAAiB,aAAA;QACEQ,GAAG,EAAEnB,KAAM;QACXoB,SAAS,EAAC,sCAAsC,CAAC;QAAA;QACjDC,KAAK,EAAE;UAAEC,KAAK,EAAE,OAAO;UAAEC,MAAM,EAAE,QAAQ;UAAEC,YAAY,EAAE,MAAM;UAAEC,MAAM,EAAE;QAAU,CAAE;QACrFC,OAAO,EAAEA,CAAA,KAAM,IAAI,CAAC3B,cAAc,CAACC,KAAK,CAAE,CAAE;QAAA;QAAAY,QAAA;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;QAAA;QAAAC,MAAA;MAAA,GAE5CtB,KAAA,CAAAiB,aAAA;QAAAC,QAAA;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;QAAA;QAAAC,MAAA;MAAA,GACEtB,KAAA,CAAAiB,aAAA;QAAKS,SAAS,EAAC,kBAAkB;QAAAR,QAAA;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;QAAA;QAAAC,MAAA;MAAA,GAC/BtB,KAAA,CAAAiB,aAAA;QAAKS,SAAS,EAAC,+BAA+B;QAAAR,QAAA;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;QAAA;QAAAC,MAAA;MAAA,GAC5CtB,KAAA,CAAAiB,aAAA;QAAKS,SAAS,EAAC,8BAA8B;QAAAR,QAAA;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;QAAA;QAAAC,MAAA;MAAA,GAAEE,GAAG,CAACS,UAAgB,CAAC,EACpEjC,KAAA,CAAAiB,aAAA;QAAKS,SAAS,EAAC,gCAAgC;QAAAR,QAAA;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;QAAA;QAAAC,MAAA;MAAA,GAAEE,GAAG,CAACU,EAAE,KAAK,CAAC,GAAG,QAAQ,GAAG,IAAU,CAAC,EACtFlC,KAAA,CAAAiB,aAAA;QAAKkB,GAAG,0BAAAC,MAAA,CAA0B9B,KAAK,aAAW;QAAC+B,GAAG,EAAC,KAAK;QAACV,KAAK,EAAE;UAAEC,KAAK,EAAE,MAAM;UAAEU,MAAM,EAAE;QAAO,CAAE;QAAApB,QAAA;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;QAAA;QAAAC,MAAA;MAAA,CAAE,CACrG,CAAC,EACNtB,KAAA,CAAAiB,aAAA;QAAKS,SAAS,EAAC,iCAAiC;QAAAR,QAAA;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;QAAA;QAAAC,MAAA;MAAA,GAC9CtB,KAAA,CAAAiB,aAAA;QAAKS,SAAS,EAAC,6BAA6B;QAAAR,QAAA;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;QAAA;QAAAC,MAAA;MAAA,GAAEE,GAAG,CAACe,SAAe,CAC9D,CAAC,EACNvC,KAAA,CAAAiB,aAAA;QAAKS,SAAS,EAAC,gCAAgC;QAAAR,QAAA;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;QAAA;QAAAC,MAAA;MAAA,GAC7CtB,KAAA,CAAAiB,aAAA;QAAKS,SAAS,EAAC,mBAAmB;QAAAR,QAAA;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;QAAA;QAAAC,MAAA;MAAA,GAAEE,GAAG,CAACgB,UAAU,EAAC,OAAU,CAAC,EAC9DxC,KAAA,CAAAiB,aAAA;QAAKS,SAAS,EAAC,gCAAgC;QAAAR,QAAA;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;QAAA;QAAAC,MAAA;MAAA,GAAC,aAAgB,CAC7D,CAAC,EACNtB,KAAA,CAAAiB,aAAA;QAAKS,SAAS,EAAC,sBAAsB;QAAAR,QAAA;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;QAAA;QAAAC,MAAA;MAAA,GACnCtB,KAAA,CAAAiB,aAAA;QAAKS,SAAS,EAAC,oBAAoB;QAAAR,QAAA;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;QAAA;QAAAC,MAAA;MAAA,GAAEE,GAAG,CAACiB,UAAU,GAAGjB,GAAG,CAACkB,aAAa,EAAC,GAAC,EAAA1C,KAAA,CAAAiB,aAAA;QAAMS,SAAS,EAAC,SAAS;QAAAR,QAAA;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;QAAA;QAAAC,MAAA;MAAA,GAAC,kBAAsB,CAAM,CAC5H,CACF,CACF,CACF,CACN,CAAC;IACJ,CAAC;IAjFC,IAAI,CAACZ,KAAK,GAAG;MACXC,KAAK,EAAE,EAAE;MAAE;MACXH,SAAS,EAAE,CAAC,CAAC,CAAC;IAChB,CAAC;EACH;EAEAmC,iBAAiBA,CAAA,EAAG;IAClB,IAAI,IAAI,CAACvC,KAAK,CAACwC,IAAI,KAAK,IAAI,EAAE;MAC5B,MAAMC,KAAK,GAAG,EAAE;MAChB,MAAMC,QAAQ,GAAG,IAAI,CAAC1C,KAAK,CAAC2C,QAAQ;MAEpC,IAAID,QAAQ,CAAChC,MAAM,KAAK,CAAC,EAAE;QACzBC,OAAO,CAACC,GAAG,CAAC,uBAAuB,CAAC;QACpC;MACF;;MAEA;MACAgC,OAAO,CAACC,GAAG,CACTH,QAAQ,CAACvB,GAAG,CAAC2B,EAAE,IACbC,KAAK,qCAAAf,MAAA,CAAqCc,EAAE,CAAE,CAAC,CAC5CE,IAAI,CAACC,GAAG,IAAIA,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC,CAAC;MAAA,CACxBF,IAAI,CAACG,IAAI,IAAI;QACZxC,OAAO,CAACC,GAAG,sBAAAoB,MAAA,CAAsBc,EAAE,QAAKK,IAAI,CAAC,CAAC,CAAC;QAC/CV,KAAK,CAACW,IAAI,CAAC,GAAGD,IAAI,CAAC,CAAC,CAAC;MACvB,CAAC,CAAC,CACDE,KAAK,CAACC,GAAG,IAAI3C,OAAO,CAACC,GAAG,CAAC,uBAAuB,EAAE0C,GAAG,CAAC,CAC3D,CACF,CAAC,CACEN,IAAI,CAAC,MAAM;QACV,IAAIP,KAAK,CAAC/B,MAAM,GAAG,CAAC,EAAE;UACpB,IAAI,CAACP,QAAQ,CAAC;YAAEI,KAAK,EAAEkC;UAAM,CAAC,CAAC;UAC/B9B,OAAO,CAACC,GAAG,CAAC,oBAAoB,EAAE6B,KAAK,CAAC,CAAC,CAAC;QAC5C,CAAC,MAAM;UACL9B,OAAO,CAACC,GAAG,CAAC,+BAA+B,CAAC;QAC9C;MACF,CAAC,CAAC,CACDyC,KAAK,CAACC,GAAG,IAAI3C,OAAO,CAAC4C,KAAK,CAAC,4BAA4B,EAAED,GAAG,CAAC,CAAC;IACnE;EACF;EA6CAE,MAAMA,CAAA,EAAG;IACP,IAAI,IAAI,CAACxD,KAAK,CAACwC,IAAI,KAAK,IAAI,EAAE;MAC5B,OACE5C,KAAA,CAAAiB,aAAA;QAAAC,QAAA;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;QAAA;QAAAC,MAAA;MAAA,GAAM,IAAI,CAACT,SAAS,CAAC,CAAO,CAAC;IAEjC,CAAC,MAAM;MACL,OACEb,KAAA,CAAAiB,aAAA;QAAKS,SAAS,EAAC,sCAAsC;QAAAR,QAAA;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;QAAA;QAAAC,MAAA;MAAA,GACnDtB,KAAA,CAAAiB,aAAA;QAAAC,QAAA;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;QAAA;QAAAC,MAAA;MAAA,GAAI,sBAAwB,CACzB,CAAC;IAEV;EACF;AACF;AAEA,eAAepB,IAAI","ignoreList":[]},"metadata":{},"sourceType":"module"}